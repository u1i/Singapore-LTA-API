<!DOCTYPE html>
<html>
  <head>
    <title>SG Buses</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 16,
          center: new google.maps.LatLng(1.29667298496, 103.854414225),
          mapTypeId: 'roadmap'
        });

        var iconBase = 'https://maps.google.com/mapfiles/kml/shapes/';
        var icons = {
          parking: {
            icon: iconBase + 'parking_lot_maps.png'
          },
          bus: {
            icon: 'http://www2.sotong.io/static/bus.png'
          },
          busred: {
            icon: 'http://www2.sotong.io/static/bus-red.png'
          },
          busgreen: {
            icon: 'http://www2.sotong.io/static/bus-green.png'
          },
          busorange: {
            icon: 'http://www2.sotong.io/static/bus-orange.png'
          },
          info: {
            icon: iconBase + 'info-i_maps.png'
          }
        };


        var features = [

{ position: new google.maps.LatLng(1.29667298496,103.854414225), type: 'busorange', title: 'Nth Bridge Rd', text: ' Bus 851 (ETA 2018-01-07T06:58:18) standing only | ' },
{ position: new google.maps.LatLng(1.2982078414,103.855491398), type: 'busorange', title: 'Nth Bridge Rd', text: ' Bus 851 (ETA 2018-01-07T06:56:33) standing only | ' },
{ position: new google.maps.LatLng(1.30033057856,103.857160807), type: 'busorange', title: 'Nth Bridge Rd', text: ' Bus 851 (ETA 2018-01-07T06:55:21) standing only | ' },
{ position: new google.maps.LatLng(1.29208221483,103.851259947), type: 'busorange', title: 'Nth Bridge Rd', text: ' Bus 851 (ETA 2018-01-07T07:00:26) standing only | ' },
{ position: new google.maps.LatLng(1.29043039363,103.850262165), type: 'busorange', title: 'Nth Bridge Rd', text: ' Bus 851 (ETA 2018-01-07T07:01:16) standing only | ' },
{ position: new google.maps.LatLng(1.29197057108,103.84328385), type: 'busorange', title: 'Clemenceau Ave', text: ' Bus 123 (ETA 2018-01-07T06:52:07) standing only | ' },
{ position: new google.maps.LatLng(1.28724656562,103.848333438), type: 'busorange', title: 'Sth Bridge Rd', text: ' Bus 851 (ETA 2018-01-07T07:02:11) standing only | ' },
{ position: new google.maps.LatLng(1.2847598096,103.834056717), type: 'busorange', title: 'Tiong Bahru Rd', text: ' Bus 123 (ETA 2018-01-07T06:57:23) standing only | ' },
{ position: new google.maps.LatLng(1.2862315772,103.834961624), type: 'busorange', title: 'Outram Rd', text: ' Bus 123 (ETA 2018-01-07T06:56:22) standing only | ' },
{ position: new google.maps.LatLng(1.28870976841,103.83737277), type: 'busorange', title: 'Havelock Rd', text: ' Bus 123 (ETA 2018-01-07T06:55:13) standing only | ' },
{ position: new google.maps.LatLng(1.28901705678,103.839942861), type: 'busorange', title: 'Havelock Rd', text: ' Bus 123 (ETA 2018-01-07T06:54:12) standing only | ' },
{ position: new google.maps.LatLng(1.30461300741,103.852000972), type: 'busorange', title: 'Sungei Rd', text: ' Bus 851 (ETA 2018-01-07T06:51:57) standing only | ' },
{ position: new google.maps.LatLng(1.30320609783,103.8555), type: 'busorange', title: 'Ophir Rd', text: ' Bus 851 (ETA 2018-01-07T06:53:26) standing only | ' },
{ position: new google.maps.LatLng(1.29624633746,103.844070092), type: 'busorange', title: 'Clemenceau Ave', text: ' Bus 123 (ETA 2018-01-07T06:50:48) standing only | ' },
{ position: new google.maps.LatLng(1.2858384714,103.832381799), type: 'busorange', title: 'Tiong Bahru Rd', text: ' Bus 123 (ETA 2018-01-07T06:58:21) standing only | ' },
{ position: new google.maps.LatLng(1.28572048365,103.828529229), type: 'busorange', title: 'Tiong Bahru Rd', text: ' Bus 123 (ETA 2018-01-07T06:59:43) standing only | ' },
{ position: new google.maps.LatLng(1.28593135446,103.826689692), type: 'busorange', title: 'Tiong Bahru Rd', text: ' Bus 123 (ETA 2018-01-07T07:00:47) standing only | ' },
{ position: new google.maps.LatLng(1.28037471151,103.823873439), type: 'busorange', title: 'Lower Delta Rd', text: ' Bus 123 (ETA 2018-01-07T07:03:37) standing only | ' },
{ position: new google.maps.LatLng(1.28373603377,103.824895209), type: 'busorange', title: 'Lower Delta Rd', text: ' Bus 123 (ETA 2018-01-07T07:02:00) standing only | ' },
{ position: new google.maps.LatLng(1.27663637861,103.823458268), type: 'busorange', title: 'Lower Delta Rd', text: ' Bus 123 (ETA 2018-01-07T07:04:47) standing only | ' },
{ position: new google.maps.LatLng(1.27413014152,103.825542905), type: 'busorange', title: 'Bt Purmei Ave', text: ' Bus 123 (ETA 2018-01-07T07:07:15) standing only | ' },
{ position: new google.maps.LatLng(1.27428160509,103.825008952), type: 'busorange', title: 'Bt Purmei Ave', text: ' Bus 123 (ETA 2018-01-07T07:06:26) standing only | ' },
{ position: new google.maps.LatLng(1.3066440446,103.849204167), type: 'busorange', title: 'Bt Timah Rd', text: ' Bus 851 (ETA 2018-01-07T06:50:22) standing only | ' },
{ position: new google.maps.LatLng(1.3094913127,103.847707478), type: 'busorange', title: 'Kg Java Rd', text: ' Bus 851 (ETA 2018-01-07T06:49:23) standing only | ' },
{ position: new google.maps.LatLng(1.31962671002,103.843438625), type: 'busorange', title: 'Thomson Rd', text: ' Bus 980 (ETA 2018-01-07T07:02:40) standing only | ' },
{ position: new google.maps.LatLng(1.3235410865,103.841893269), type: 'busorange', title: 'Thomson Rd', text: ' Bus 980 (ETA 2018-01-07T07:01:50) standing only | ' },
{ position: new google.maps.LatLng(1.32489453398,103.842117444), type: 'busorange', title: 'Thomson Rd', text: ' Bus 980 (ETA 2018-01-07T07:01:11) standing only | ' },
        ];

        // Create markers.
        features.forEach(function(feature) {
          var marker = new google.maps.Marker({
            position: feature.position,
            icon: icons[feature.type].icon,
            map: map,
            title: feature.title
          });

          // Create our info window content
          var infoWindowContent = '<div class="info_content">' +
              '<h3>' + feature.title + '</h3>' +
              '<p>' + feature.text + '</p>' +
          '</div>';

          // Initialise the info Window
          var infoWindow = new google.maps.InfoWindow({
              content: infoWindowContent
          });

	google.maps.event.addListener(marker, 'click', function() {
        	infoWindow.open(map, marker);
	    });

        });
      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDNrTsxaiXiYqNcNdoheNPH27QaKHbOPok&callback=initMap">
    </script>
  </body>
</html>
